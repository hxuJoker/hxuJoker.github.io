module.exports=function(t){var e={};function o(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/dist/",o(o.s=11)}({0:function(t,e,o){"use strict";function r(t,e,o,r,n,s,i,a){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=o,c._compiled=!0),r&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),i?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=l):n&&(l=a?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(c.functional){c._injectStyles=l;var h=c.render;c.render=function(t,e){return l.call(e),h(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:c}}o.d(e,"a",(function(){return r}))},1:function(t,e,o){"use strict";e.a=function(t,{prefix:e="m",firstUpperCase:o=!0}={}){const r={props:{},computed:{}};for(let n in t)if("$slots"!==n){r.props[n]=t[n];let s=e;s+=o?`${n.charAt(0).toUpperCase()}${n.substr(1)}`:n,r.computed[s]={get(){if(t.$slots&&t.$slots[n]&&!this.$slots[t.$slots[n]])return!1;return void 0===this.$options.propsData[n]?this.$ea.config[n]:this[n]},set(t){void 0===this.$options.propsData[n]?this.$ea.config[n]=t:this.$emit(`update:${n}`,t)}}}return r}},11:function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"ea-tabs"},[o("div",{staticClass:"_wrap"},["false"!==t.collapse?o("ea-tabs-item",{attrs:{icon:"ea-icon-page-arrow-"+(t.mCollapse?"right":"left")},on:{click:function(e){t.mCollapse=!t.mCollapse}}}):t._e(),t._v(" "),t.arrowWidth>0?o("ea-tabs-item",{directives:[{name:"longpress",rawName:"v-longpress",value:function(){return t.arrowLeft(30)},expression:"()=> arrowLeft(30)"}],attrs:{icon:"el-icon-d-arrow-left"},on:{click:function(e){return t.arrowLeft(100)}}}):t._e(),t._v(" "),o("div",{ref:"scroll",staticClass:"_scroll"},[o("div",{staticClass:"_nav",style:"transform: translateX("+t.arrowX+"px)"},[o("ea-tabs-item",{attrs:{title:t.mHome.title,src:t.mHome.src,icon:t.mHome.icon,active:t.path===t.mHome.path,scroll:""},on:{click:function(e){return t.to(t.mHome)}}}),t._v(" "),t._l(t.tabs,(function(e){return o("ea-tabs-item",{key:e.toPath,attrs:{title:e.title,src:e.src,icon:e.icon,active:t.path===e.toPath,closable:"",scroll:""},on:{click:function(o){return t.to(e)},close:function(o){return t.tabsClose([e])}}})}))],2)]),t._v(" "),t.arrowWidth>0?o("ea-tabs-item",{directives:[{name:"longpress",rawName:"v-longpress",value:function(){return t.arrowRight(30)},expression:"()=> arrowRight(30)"}],attrs:{icon:"el-icon-d-arrow-right"},on:{click:function(e){return t.arrowRight(100)}}}):t._e(),t._v(" "),o("el-dropdown",{on:{command:t.tabsCloseByCommand}},[o("ea-tabs-item",{attrs:{icon:"el-icon-caret-bottom"}}),t._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"refresh",icon:"el-icon-refresh"}},[t._v("刷新")]),t._v(" "),o("el-dropdown-item",{attrs:{command:"left",icon:"el-icon-back"}},[t._v("关闭左侧标签")]),t._v(" "),o("el-dropdown-item",{attrs:{command:"right",icon:"el-icon-right"}},[t._v("关闭右侧标签")]),t._v(" "),o("el-dropdown-item",{attrs:{command:"other",icon:"el-icon-document-delete"}},[t._v("关闭其他标签页")])],1)],1)],1)])};r._withStripped=!0;var n=o(1);var s={name:"longpress",bind:function(t,e,o){if("function"!=typeof e.value){const t=o.context.name;let r=`[longpress:] provided expression '${e.expression}' is not a function, but has to be`;t&&(r+=`Found in component '${t}' `),console.warn(r)}let r=null,n=null,s=t=>{"click"===t.type&&0!==t.button||null===r&&(r=setTimeout(()=>{a(),n=setInterval(()=>{a()},50)},500))},i=()=>{null!==r&&(clearTimeout(r),r=null),null!==n&&(clearInterval(n),n=null)};const a=t=>{e.value(t)};t.addEventListener("mousedown",s),t.addEventListener("touchstart",s),t.addEventListener("click",i),t.addEventListener("mouseout",i),t.addEventListener("touchend",i),t.addEventListener("touchcancel",i)}},i={name:"EaTabs",mixins:[Object(n.a)({collapse:[Boolean,String],home:Object})],components:{},directives:{longpress:s},props:{navData:{type:Array,default:()=>[]},validator:Function},watch:{$route(t){this.routeAfterEach(t)}},data(){const{tabs:t,history:e}=this.$ea.config.page;return{tabs:t,history:e,active:"",children:[],arrowWidth:0,arrowX:0}},computed:{path(){return this.$route.path}},methods:{to({path:t,toPath:e,fullPath:o}){this.$router.push(o||e||t)},mValidator(t,e){!1!==t.matched[t.matched.length-1].meta.tabs&&(this.validator?this.validator(t,e):e())},routeAfterEach(t){t.path!==this.mHome.path&&this.mValidator(t,()=>{const e=t.matched.find(t=>t.meta.childrenAgent)||t.matched[t.matched.length-1];let o=this.tabs.find(e=>e.toPath===t.path);const r=!o;r&&(o=this.getTab(e),this.tabs.push(o)),o.toPath=t.path,o.fullPath=t.fullPath,o.route=t,this.history.push([e.path,t.path]),"function"==typeof o.onOpen&&o.onOpen(o,r)})},getTab(t){let e=t.meta.tabs||this.getTabByNavData(this.navData,t.path)||{};return void 0===e.title&&(e.title=t.meta.label||t.meta.title||t.name),e.path=t.path,e.name=t.name,{...e}},getTabByNavData(t,e){for(let o of t){if(o.path===e)return o;if(o.children){const t=this.getTabByNavData(o.children,e);if(t)return t}}},childrenMounted(t){this.children.push({_uid:t._uid,width:t.$el.clientWidth}),this.handleArrow()},childrenDestroyed(t){const e=this.children.findIndex(e=>e._uid===t._uid);e>-1&&(this.children.splice(e,1),this.handleArrow())},handleArrow(){if(this.$refs.scroll){let t=this.$refs.scroll.clientWidth,e=this.children.reduce((t,e)=>t+e.width,0);this.arrowWidth=e-t,this.arrowWidth<0&&(this.arrowWidth=0),this.arrowWidth||(this.arrowX=0)}},arrowLeft(t=100){this.arrowX<0&&(this.arrowX=this.arrowX<-t?this.arrowX+t:0)},arrowRight(t=100){if(this.arrowWidth>0){let e=this.arrowWidth+80;this.arrowX=e+this.arrowX>t?this.arrowX-t:-e}},tabsCloseByCommand(t){let e=[],o=this.tabs.findIndex(t=>t.path===this.path);switch(t){case"left":o>0&&(e=this.tabs.slice(0,o));break;case"right":o<this.tabs.length&&(e=this.tabs.slice(o+1));break;case"other":e=this.tabs.filter((t,e)=>e!==o)}e.length&&this.tabsClose(e)},async tabsClose(t){const{tabs:e,history:o}=this;for(let o of t)if(await this.tabsCloseBefore(o)){const t=e.indexOf(o);e.splice(t,1),this.$ea.$emit("tabs-close-after",o),"function"==typeof o.onClose&&o.onClose(o)}let r=o.filter(([,t])=>e.some(e=>e.toPath===t));if(r.length!==o.length&&(o.splice(0,o.length),o.push(...r)),!e.some(t=>t.toPath===this.path)){let t=o.length?o[o.length-1][1]:this.mHome.path;this.$router.push(t)}},async tabsCloseBefore(t){const e=this.$ea._events["tabs-close-before"];if(e&&e.length)for(let o of e){if(!1===await o.call(this,t))return!1}return!0}},created(){},mounted(){this.routeAfterEach(this.$route),this.$nextTick(()=>{this.handleArrow()}),window.addEventListener("resize",()=>{this.handleArrow()}),this.$ea.$on("collapse",()=>{setTimeout(()=>{this.handleArrow()},301)}),this.$ea.tabsClose=t=>{const e=this.tabs.find(e=>e.toPath===(t||this.path));e&&this.tabsClose([e])}}},a=o(0),l=Object(a.a)(i,r,[],!1,null,null,null);l.options.__file="packages/components/tabs/src/Tabs.vue";var c=l.exports;o(44);c.install=t=>{t.component(c.name,c)};e.default=c},44:function(t,e){}});